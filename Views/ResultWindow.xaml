<Window x:Class="AI_Mouse.Views.ResultWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:markdown="clr-namespace:Markdig.Wpf;assembly=Markdig.Wpf"
        mc:Ignorable="d"
        Title="AI Mouse"
        WindowStyle="None"
        ResizeMode="CanResizeWithGrip"
        Topmost="True"
        SizeToContent="Height"
        Width="400"
        MaxHeight="600"
        ShowInTaskbar="False"
        d:DesignHeight="400" d:DesignWidth="400">
    <Window.Resources>
        <Style TargetType="Window">
            <Setter Property="Background" Value="#F5F5F5"/>
        </Style>
    </Window.Resources>
    
    <Border CornerRadius="8" 
            Background="White" 
            BorderBrush="#E0E0E0" 
            BorderThickness="1"
            Margin="0"
            Padding="0">
        <Border.Effect>
            <DropShadowEffect BlurRadius="10" 
                              ShadowDepth="3" 
                              Opacity="0.3" 
                              Color="Black"/>
        </Border.Effect>
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- 타이틀 바 -->
            <Border Grid.Row="0" 
                    Background="#2196F3" 
                    CornerRadius="8,8,0,0"
                    Padding="12,8">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock Grid.Column="0" 
                               Text="AI Mouse" 
                               Foreground="White" 
                               FontSize="14" 
                               FontWeight="SemiBold"
                               VerticalAlignment="Center"/>
                    
                    <Button Grid.Column="1" 
                            Content="✕" 
                            Width="24" 
                            Height="24"
                            Padding="0"
                            FontSize="14"
                            FontWeight="Bold"
                            Foreground="White"
                            Background="Transparent"
                            BorderThickness="0"
                            Cursor="Hand"
                            Click="CloseButton_Click"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Right">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#1976D2"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </Grid>
            </Border>
            
            <!-- 콘텐츠 영역 -->
            <ScrollViewer Grid.Row="1" 
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled"
                          Padding="16"
                          Background="White">
                <Grid>
                    <!-- 로딩 인디케이터 -->
                    <StackPanel Visibility="{Binding LoadingVisibility}"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Margin="0,20">
                        <TextBlock Text="AI 응답을 기다리는 중..." 
                                   FontSize="14" 
                                   Foreground="#666"
                                   HorizontalAlignment="Center"
                                   Margin="0,0,0,10"/>
                        <ProgressBar IsIndeterminate="True" 
                                      Width="200" 
                                      Height="4"
                                      HorizontalAlignment="Center"/>
                    </StackPanel>
                    
                    <!-- 마크다운 뷰어 -->
                    <markdown:MarkdownViewer Markdown="{Binding ResponseText}"
                                             Visibility="{Binding ContentVisibility}"
                                             Padding="0"/>
                </Grid>
            </ScrollViewer>
        </Grid>
    </Border>
</Window>
